{% extends "default.html" %}

{%- block head -%}
{%- endblock head -%}

{% block content %}
<div class="styled-title">
    <h1 class="faq-title">Frequently Asked Questions</h1>
</div>

<div class="left-aside-bg">   
    <div class="left-aside faq-aside">    
        <aside>
            <h2>CATEGORIES</h2>
            <ul class="category-nav">
                <li><a href="#general" class="category-link">General</a></li>
                <li><a href="#memory-performance" class="category-link">Memory & Performance</a></li>
                <li><a href="#technical" class="category-link">Technical</a></li>
                <li><a href="#limitations" class="category-link">Limitations</a></li>
            </ul>
        
            <div class="edit-box">
                <span>Found an Issue?</span>
                <a href="https://github.com/valkey-io/valkey-io.github.io/edit/main/content/topics/faq/" class="edit-link" target="_blank">
                    Edit this page on GitHub
                </a>
            </div>
        </aside>

        <main class="container">
            <div class="faq-content">
                    <div class="faq-container">
                    {% set faq_section = get_section(path="topics/faq/_index.md") %}
                    
                    <!-- General Category -->
                    <div class="faq-section" id="general">
                        <h2>General</h2>
                        {% for page in faq_section.pages | filter(attribute="extra.category", value="general") | sort(attribute="title") %}
                        <div class="faq-item">
                            <h3 class="faq-question">{{ page.extra.question }}</h3>
                            <div class="faq-answer">
                                {{ page.content | safe }}
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <!-- Memory & Performance Category -->
                    <div class="faq-section" id="memory-performance">
                        <h2>Memory & Performance</h2>
                        {% for page in faq_section.pages | filter(attribute="extra.category", value="memory-performance") | sort(attribute="title") %}
                        <div class="faq-item">
                            <h3 class="faq-question">{{ page.extra.question }}</h3>
                            <div class="faq-answer">
                                {{ page.content | safe }}
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <!-- Technical Category -->
                    <div class="faq-section" id="technical">
                        <h2>Technical</h2>
                        {% for page in faq_section.pages | filter(attribute="extra.category", value="technical") | sort(attribute="title") %}
                        <div class="faq-item">
                            <h3 class="faq-question">{{ page.extra.question }}</h3>
                            <div class="faq-answer">
                                {{ page.content | safe }}
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <!-- Limitations Category -->
                    <div class="faq-section" id="limitations">
                        <h2>Limitations</h2>
                        {% for page in faq_section.pages | filter(attribute="extra.category", value="limitations") | sort(attribute="title") %}
                        <div class="faq-item">
                            <h3 class="faq-question">{{ page.extra.question }}</h3>
                            <div class="faq-answer">
                                {{ page.content | safe }}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.faq-question').forEach(function(question) {
    // Add caret icon to each question
    var caret = document.createElement('img');
    caret.src = '/img/icon-caret-down.svg';
    caret.className = 'faq-caret';
    caret.alt = 'Toggle answer';
    question.insertBefore(caret, question.firstChild);
    
    question.style.cursor = 'pointer';
    question.addEventListener('click', function() {
      var answer = question.nextElementSibling;
      if (answer && answer.classList.contains('faq-answer')) {
        answer.style.display = (answer.style.display === 'none' || !answer.style.display) ? 'block' : 'none';
        question.parentElement.classList.toggle('open');
      }
    });
    // Start collapsed and ensure caret shows correct state:
    var answer = question.nextElementSibling;
    if (answer && answer.classList.contains('faq-answer')) {
      answer.style.display = 'none';
      // Ensure the parent doesn't have 'open' class initially
      question.parentElement.classList.remove('open');
    }
  });
});
</script>
{% endblock content %} 